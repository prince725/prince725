name: Update Profile README with Private Stats

on:
  schedule:
    - cron: "0 */12 * * *"   # updates every 12 hours
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    env:
      GH_TOKEN: ${{ secrets.GH_TOKEN }}
      USERNAME: prince725

    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Generate README content
        run: |
          echo "### Hi, I'm Prince ðŸ‘‹" > README.md
          echo "" >> README.md
          echo "ðŸš€ I build automation for Swiggy Instamart, Blinkit, Zepto & Amazon Ads" >> README.md
          echo "ðŸ§  Passion: Ads Automation | Python | Playwright | ML | Cloud | Data" >> README.md
          echo "" >> README.md
          echo "### ðŸ”— Connect" >> README.md
          echo "- LinkedIn: https://www.linkedin.com/in/prince-jaiswal-9b782a190/" >> README.md
          echo "" >> README.md
          echo "### ðŸ› ï¸ Tech Stack" >> README.md
          echo "Python | Node.js | Playwright | PostgreSQL | Supabase | Redis | AWS | FastAPI | TypeScript" >> README.md
          echo "" >> README.md
          echo "### ðŸ“ˆ GitHub Stats" >> README.md
          STATS_URL="https://github-readme-stats.vercel.app/api?username=$USERNAME&count_private=true&include_all_commits=true&show_icons=true&theme=tokyonight&hide_border=true&token=$GH_TOKEN"
          LANG_URL="https://github-readme-stats.vercel.app/api/top-langs/?username=$USERNAME&layout=compact&theme=tokyonight&hide_border=true&token=$GH_TOKEN"
          
          echo "![]( $STATS_URL )" >> README.md
          echo "" >> README.md
          echo "![]( $LANG_URL )" >> README.md
          echo "" >> README.md
          echo "> â±ï¸ Auto-generated every 12 hours" >> README.md

      - name: Commit & Push
        run: |
          git config --global user.email "action@github.com"
          git config --global user.name "GitHub Action"
          git add README.md
          git commit -m "auto: update profile README" || echo "No changes"
          git push
